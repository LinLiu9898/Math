% Notes:
% If you want some environment to continue onto the next page, remove the command nobreak=true
% If you want to remove the date on the header of each page replace replace \ihead{\footnotesize\textbf{\theauthor}(\thedate)} with \ihead{\footnotesize\textbf{\theauthor}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% evan.sty
% If you don't know how to use this file, read:
% https://web.evanchen.cc/faq-latex.html#L-4

% %%%%%%%%%%%%%%%%%%%%%%
% %%     evan.sty     %%
% %%%%%%%%%%%%%%%%%%%%%%
%
% This file is licensed under the BOOST software license 1.0.
% This basically means you can do whatever you want with it,
% as long as any TeX source versions published
% include my name and this copyright notice.
% The compiled PDF itself is NOT required to have an attribution,
% although of course such attributions are greatly appreciated :D
% Here is the text of the license:
%
% Boost Software License - Version 1.0 - August 17th, 2003
%
% Copyright (c) 2020 Evan Chen [evan at evanchen.cc]
% https://web.evanchen.cc/ || github.com/vEnhance
%
% Permission is hereby granted, free of charge, to any person or organization
% obtaining a copy of the software and accompanying documentation covered by
% this license (the "Software") to use, reproduce, display, distribute,
% execute, and transmit the Software, and to prepare derivative works of the
% Software, and to permit third-parties to whom the Software is furnished to
% do so, all subject to the following:
%
% The copyright notices in the Software and this entire statement, including
% the above license grant, this restriction and the following disclaimer,
% must be included in all copies of the Software, in whole or in part, and
% all derivative works of the Software, unless such copies or derivative
% works are solely in the form of machine-executable object code generated by
% a source language processor.
%
% THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT
% SHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE
% FOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE,
% ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
% DEALINGS IN THE SOFTWARE.

\ProvidesPackage{evan}
%%fakesection Argument processing
% Default Arguments
% We include "Evan" in all of these to make sure
% that they don't collide with anything in external packages
\newif\ifevanfancy\evanfancytrue
\newif\ifevanhdr\evanhdrtrue
\newif\ifevanhref\evanhreftrue
\newif\ifevansetup\evansetuptrue
\newif\ifevanthm\evanthmtrue
\newif\ifevansecthm\evansecthmfalse
\newif\ifevanht\evanhtfalse
\newif\ifevanpkg\evanpkgtrue
\newif\ifevanpdf\evanpdftrue
\newif\ifevanauthor\evanauthortrue
\newif\ifevanchinese\evanchinesefalse
\newif\ifevanmdthm\evanmdthmfalse
\newif\ifevandiagrams\evandiagramsfalse
\newif\ifevanpatchasy\evanpatchasyfalse
\newif\ifevanhints\evanhintsfalse
\newif\ifevanasy\evanasytrue
\newif\ifevancolorsec\evancolorsecfalse
\newif\ifevantitlemark\evantitlemarktrue
\newif\ifevanvonenabled\evanvonenabledfalse



\NeedsTeXFormat{LaTeX2e}


\RequirePackage{amsmath,amssymb,amsfonts, amsthm}
\RequirePackage{tcolorbox}
\RequirePackage[]{geometry}
\RequirePackage[utf8]{inputenc}
\RequirePackage{graphicx}
\RequirePackage{xcolor}
\RequirePackage[normalem]{ulem}
%\RequirePackage{enumitem}
\RequirePackage{tikz}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newenvironment{claim}[1]
{
\bigskip

\textbf{Claim #1.}}{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\DeclareOption{sexy}{\evansecthmtrue\evanmdthmtrue\evancolorsectrue} % long docs

%\DeclareOption{fancy}{\evanfancytrue}
%\DeclareOption{nofancy}{\evanfancyfalse}
%\DeclareOption{hdr}{\evanhdrtrue}
%\DeclareOption{nohdr}{\evanhdrfalse}
%\DeclareOption{href}{\evanhreftrue}
%\DeclareOption{nohref}{\evanhreffalse}

%\DeclareOption{nosetup}{\evansetupfalse}
%\DeclareOption{thm}{\evanthmtrue}
%\DeclareOption{nothm}{\evanthmfalse}
%\DeclareOption{secthm}{\evansecthmtrue}
%\DeclareOption{nosecthm}{\evansecthmfalse}

%\DeclareOption{ht}{\evanhttrue}
%\DeclareOption{nopdf}{\evanpdffalse}
%\DeclareOption{nopkg}{\evanpkgfalse}
%\DeclareOption{noauthor}{\evanauthorfalse}
%\DeclareOption{titlemark}{\evantitlemarktrue} % Sets title in ohead, not \rightmark
%\DeclareOption{sectionmark}{\evantitlemarkfalse} % Uses \rightmark not title in ohead

%\DeclareOption{mdthm}{\evanmdthmtrue}
%\DeclareOption{nomdthm}{\evanmdthmfalse}
%\DeclareOption{diagrams}{\evandiagramstrue}
%\DeclareOption{nodiagrams}{\evandiagramsfalse}
%\DeclareOption{colorsec}{\evancolorsectrue}
%\DeclareOption{nocolorsec}{\evancolorsecfalse}

%\DeclareOption{patchasy}{\evanpatchasytrue}
%\DeclareOption{noasy}{\evanasyfalse}

%\DeclareOption{hints}{\evanhintstrue}
%\DeclareOption{von}{\evanvonenabledtrue}

\ProcessOptions\relax

% if packages not loaded, turn off mdthm and asy
\ifevanpkg\else\evanmdthmfalse\fi
\ifevanpkg\else\evanasyfalse\fi

% If no setup, turn off theorems
%\ifevansetup\else\evanthmfalse\fi

%%fakesection Some macros
%Small commands
\ifevanpkg
	\usepackage{amsmath,amssymb}
\fi
\newcommand{\cbrt}[1]{\sqrt[3]{#1}}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\ceiling}[1]{\left\lceil #1 \right\rceil}
%\newcommand{\mailto}[1]{\href{mailto:#1}{\texttt{#1}}}
\newcommand{\ol}{\overline}
\newcommand{\ul}{\underline}
\newcommand{\wt}{\widetilde}
\newcommand{\wh}{\widehat}
\newcommand{\eps}{\varepsilon}
%\newcommand{\vocab}[1]{\textbf{\color{blue} #1}}
%\providecommand{\alert}{\vocab}
%\newcommand{\catname}{\mathsf}
\newcommand{\hrulebar}{
  \par\hspace{\fill}\rule{0.95\linewidth}{.7pt}\hspace{\fill}
  \par\nointerlineskip \vspace{\baselineskip}
}

%For use in author command
%\newcommand{\plusemail}[1]{\\ \normalfont \texttt{\mailto{#1}}}

%More commands and math operators
\DeclareMathOperator{\cis}{cis}
\DeclareMathOperator*{\lcm}{lcm}
\DeclareMathOperator*{\argmin}{arg min}
\DeclareMathOperator*{\argmax}{arg max}

%Convenient Environments
\newenvironment{soln}{\begin{proof}[Solution]}{\end{proof}}
\newenvironment{parlist}{\begin{inparaenum}[(i)]}{\end{inparaenum}}
%\newenvironment{gobble}{\setbox\z@\vbox\bgroup}{\egroup}

%Inequalities
\newcommand{\cycsum}{\sum_{\mathrm{cyc}}}
\newcommand{\symsum}{\sum_{\mathrm{sym}}}
\newcommand{\cycprod}{\prod_{\mathrm{cyc}}}
\newcommand{\symprod}{\prod_{\mathrm{sym}}}

%From Kiran Kedlaya's "Geometry Unbound"
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\dang}{\measuredangle} %% Directed angle
\newcommand{\ray}[1]{\overrightarrow{#1}} 
\newcommand{\seg}[1]{\overline{#1}}
\newcommand{\arc}[1]{\wideparen{#1}}

%From M275 "Topology" at SJSU
\newcommand{\inv}{^{-1}}

%From M170 "Introduction to Graph Theory" at SJSU
\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\ord}{ord}

%From the USAMO .tex files
\newcommand{\dg}{^\circ}
\newcommand{\ii}{\item}

% From Math 55 and Math 145 at Harvard
\newenvironment{subproof}[1][Proof]{%
\begin{proof}[#1] \renewcommand{\qedsymbol}{$\blacksquare$}}%
{\end{proof}}

\newcommand{\On}{\mathrm{On}} % ordinals
\DeclareMathOperator{\img}{im} % Image
\DeclareMathOperator{\Img}{Im} % Image

%%fakesection BEGIN MAIN SETUP
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ifevansetup
	%%fakesection Set up author and date
	\ifevanauthor
		\title{} % empty title to avoid crashes
		\author{Lin Liu}
		\date{\today}
	\fi
	%%fakesection Hyperref
	\ifevanpkg
		\PassOptionsToPackage{usenames,svgnames,dvipsnames,table}{xcolor}
		\usepackage{xcolor}
		\ifevanhref
			\usepackage[colorlinks=true]{hyperref}
			\hypersetup{urlcolor=RubineRed,linkcolor=RoyalBlue,citecolor=ForestGreen}
		\fi
		\usepackage[nameinlink]{cleveref}
	\fi

	%%fakesection New Theorem Styles
	\ifevanthm
		\usepackage{amsthm}
		\usepackage{thmtools}
	\fi

	%%fakesection Fancy section and chapter heads
	\ifevancolorsec
		\@ifundefined{KOMAClassName}{}{
			\@ifundefined{chapter}{}{
				\addtokomafont{partprefix}{\rmfamily}
				\renewcommand*{\partformat}{\color{purple}
					\scalebox{2.5}{\thepart}\enlargethispage{2em}}
				\addtokomafont{chapterprefix}{\raggedleft}
				\RedeclareSectionCommand[beforeskip=0.5em]{chapter}
				\renewcommand*{\chapterformat}{\mbox{%
					\scalebox{1.5}{\chapappifchapterprefix{\nobreakspace}}%
					\scalebox{2.718}{\color{purple}\thechapter}\enskip}}
			}
			\renewcommand*{\sectionformat}%
				{\color{purple}\S\thesection\enskip}
			\renewcommand*{\subsectionformat}%
				{\color{purple}\S\thesubsection\enskip}
			\renewcommand*{\subsubsectionformat}%
				{\color{purple}\S\thesubsubsection\enskip}
			\KOMAoptions{numbers=noenddot}
			%\usetocstyle{KOMAlike}
		}
	\fi


	%%fakesection Loads a bunch of useful packages (but allow disabling)
	\ifevanpkg
		\ifevanvonenabled
			\IfFileExists{von.sty}{\usepackage{von}}{}
		\fi
		\usepackage{listings}
		\usepackage{mathrsfs}
		\usepackage{textcomp}
		\lstset{basicstyle=\footnotesize\ttfamily,
			numbers=left,
			numbersep=5pt,
			numberstyle=\tiny,
			keywordstyle=\bfseries,
			% title=\lstname,
			showstringspaces=false,
			tabsize=4,
			frame=single,
			keywordstyle=\bfseries\color{blue},
			commentstyle=\color{green!70!black},
			identifierstyle=\color{green!20!black},
			stringstyle=\color{orange},
			breaklines=true,
			breakatwhitespace=true,
			frame=none
		}
		\usepackage[shortlabels]{enumitem}
		% a list I like for walkthrough's --- Drew-style parts
		\newlist{walk}{enumerate}{3}
		\setlist[walk]{label=\bfseries (\alph*)}
		\usepackage[obeyFinal,textsize=scriptsize,shadow]{todonotes}
		\usepackage{textcomp}
		\usepackage{multirow}
		% Tiny tiny optimizations:
		\usepackage{mathtools}
		\usepackage{microtype}
	\fi

	%%fakesection \maketitle configuration
	\@ifundefined{KOMAClassName}%
		{} % do nothing outside KOMA class
		{% If KOMA exists. . .
		\addtokomafont{subtitle}{\Large}
		\setkomafont{author}{\Large\scshape}
	%	\setkomafont{date}{\Large\normalsize}
		}
	\providecommand{\thetitle}{\@title}
	\providecommand{\theauthor}{\@author}
	\providecommand{\thedate}{\@date}

	%%fakesection Commutative diagrams support
	\ifevandiagrams
		\usepackage{tikz-cd}
		\usetikzlibrary{decorations.pathmorphing}
	\fi

	%%fakesection Page Setup
	\ifevanfancy
		\@ifundefined{KOMAClassName}
		{
			\usepackage{fancyhdr}
			\setlength{\headheight}{0.75in}
			\setlength{\oddsidemargin}{0in}
			\setlength{\evensidemargin}{0in}
			\setlength{\voffset}{-1.0in}
			\setlength{\headsep}{10pt}
			\setlength{\textwidth}{6.5in}
			\setlength{\headwidth}{6.5in}
			\setlength{\textheight}{8.75in}
			\setlength{\parskip}{1ex plus 0.5ex minus 0.2ex}
			\setlength{\footskip}{0.3in}
			\ifevanhdr
				\renewcommand{\headrulewidth}{0.5pt}
				\renewcommand{\footrulewidth}{0.0pt}
				\pagestyle{fancy}
				\lhead{Evan Chen}
				\chead{}
				\rhead{\nouppercase{\leftmark}}
				\lfoot{}
				\cfoot{\thepage}
				\rfoot{}
			\fi
		}
		{
			\usepackage[headsepline]{scrlayer-scrpage}
			\renewcommand{\headfont}{}
			\addtolength{\textheight}{3.14cm}
			\setlength{\footskip}{0.5in}
			\setlength{\headsep}{10pt}
			\ihead{\footnotesize\textbf{\theauthor} (\thedate) }
			\automark{section}
			\chead{}
			\ohead{\footnotesize\textbf{\thetitle}}
			\cfoot{\pagemark}
		}
	\fi

%%fakesection END MAIN SETUP
\fi
